# RenameSubtitles_RE
### 适用于字幕视频匹配的Windows批量处理脚本
### Copyright(c) 2019-2020 yyfll (dyystudio@qq.com)

更快，更准确的新一代视频字幕匹配批处理，NOW COMPLETE！

## 为什么是RE？

其实在这个版本之前就有一个“RenameSubtitles”项目，是基于二十余个匹配模板的简单粗暴的程序

在添加某个模板之后，for无法同时分析那么多的项目，就爆了

于是为了代替原本十分不可靠的初代RS，就有了RS:RE

## 功能
字幕重命名（其实不只是字幕，只要你把扩展名输进去，全都可以匹配）

## 使用方法
我在批处理里写了一堆提示，特别碍眼，看不懂就不关我事了

## 配置要求
处理器：能亮屏就无所谓，但是如果要跑Auto方式，那么有块桌面级4代i5可能更好

显卡：能亮屏就行，这个真无所谓

运行内存：能跑CMD就能跑这个

存储空间：50KB，软盘都能装得下吧

系统：至少Windows7吧，XP我没试过

网络：别逗了，怎么可能需要

## AUTO模式算法介绍
自动模式的算法其实还不是很完整，主要是因为我没空完善

现在使用的是“比多-同长-差大”算法：

1. 先将计算所有输入文件名的长度

2. 取长度相同最多的（这是针对规则文件名的匹配方式，新算法想出来了没空写）

3. 从文件名左侧向右侧逐个与其他文件做比较，然后取其低于阈值的差别值（差别值就是出现不同的位置和不同的长度，为什么要执行多组是因为担心出错）

4. 对字幕文件重复1~3步

5. 得出匹配规则，交给标准模式

这种算法虽然慢，但是准确率还是非常不错的。

## 模块组
本批处理是我苟yy写那么多批处理来函数用的最多的，我列了个表

    add_char          向字符串添加指定长度的目标字符
    number_list       创建一个数组，或向该数组末尾添加一个新值
    list_largest      求出数组中最大值，同时返回最大值所在的变量
    list_minimum      求出数组中最小值，同时返回最小值所在的变量
    list_appear       返回数组中出现的所有值(数组)
    list_appear_most  通过list_appear返回的
    long_string       计算字符串长度
    compare_list      将数组拆解递交给compare_string
    compare_string    将一个字符串与一整个数组中所有字符串比较
    num_in_range      判断误差是否超过所给误差阈值
    check_num         拆分数组递交给num_in_range
    check_path_cmd    原本不应该是一个函数，但是本批处理中分成了一个函数

## 版本记录
> 1.0.5c - 2020/01/04

    半角感叹号完全兼容（主程序完全不使用命令扩展）
    
> 1.0.5b - UNKNOWN

    半角感叹号部分兼容（除了AUTO部分外不使用命令扩展）
    
> 1.0.4 - UNKNOWN

    可自定Step的compare_string（速度大幅提升）
    第二种匹配模式（其实就是没补0再配一次）
    
> 1.0.3 - UNKNOWN

    可自定Step的long_string
    
> 1.0.2 - UNKNOWN

    重命名预览
    更快的long_string（Step 5）
    可添加阈值的自动匹配
    修正自动搜索结果错误
    
> 1.0.1 - UNKNOWN

    更快的long_string（Step 3）
    
> 1.0.0 - UNKNOWN

    修正多扩展名时搜索错误
    更快的number_list
    
> 1.0.0γ2 - UNKNOWN

    自动去引号
    
> 1.0.0γ - UNKNOWN

    自动搜索编写完毕
    
> 1.0.0β2 - UNKNOWN

    （没有留下任何版本记录）
    
> 1.0.0β - UNKNOWN

    删除无用模块
    
> 1.0.0α - UNKNOWN

    基础程序编写完毕
